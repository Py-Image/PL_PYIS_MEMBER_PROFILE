!function(a,b){"object"==typeof exports&&"object"==typeof module?module.exports=b(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],b):"object"==typeof exports?exports.cropit=b(require("jquery")):a.cropit=b(a.jQuery)}(this,function(a){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}([function(a,b,c){function d(a){return a&&a.__esModule?a:{"default":a}}var e=Array.prototype.slice,f=c(1),g=d(f),h=c(2),i=d(h),j=c(4),k=c(6),l=function(a,b){return a.each(function(){var a=g["default"].data(this,j.PLUGIN_KEY);a&&b(a)})},m=function(a,b,c){var d=a.first().data(j.PLUGIN_KEY);return d&&g["default"].isFunction(d[b])?d[b](c):null},n={init:function(a){return this.each(function(){if(!g["default"].data(this,j.PLUGIN_KEY)){var b=new i["default"](g["default"],this,a);g["default"].data(this,j.PLUGIN_KEY,b)}})},destroy:function(){return this.each(function(){g["default"].removeData(this,j.PLUGIN_KEY)})},isZoomable:function(){return m(this,"isZoomable")},"export":function(a){return m(this,"getCroppedImageData",a)}},o=function(a,b){return l(a,function(a){a[b]()})},p=function(a,b,c){if((0,k.exists)(c))return l(a,function(a){a[b]=c});var d=a.first().data(j.PLUGIN_KEY);return d[b]};g["default"].fn.cropit=function(a){return n[a]?n[a].apply(this,Array.prototype.slice.call(arguments,1)):["imageState","imageSrc","offset","previewSize","imageSize","zoom","initialZoom","exportZoom","minZoom","maxZoom"].indexOf(a)>=0?p.apply(void 0,[this].concat(e.call(arguments))):["rotateCW","rotateCCW","disable","reenable"].indexOf(a)>=0?o.apply(void 0,[this].concat(e.call(arguments))):n.init.apply(this,arguments)}},function(b,c){b.exports=a},function(a,b,c){function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=c(1),h=d(g),i=c(3),j=d(i),k=c(4),l=c(5),m=c(6),n=function(){function a(b,c,d){e(this,a),this.$el=(0,h["default"])(c);var f=(0,l.loadDefaults)(this.$el);this.options=h["default"].extend({},f,d),this.init()}return f(a,[{key:"init",value:function(){var a=this;this.image=new Image,this.preImage=new Image,this.image.onload=this.onImageLoaded.bind(this),this.preImage.onload=this.onPreImageLoaded.bind(this),this.image.onerror=this.preImage.onerror=function(){a.onImageError.call(a,k.ERRORS.IMAGE_FAILED_TO_LOAD)},this.$preview=this.options.$preview.css("position","relative"),this.$fileInput=this.options.$fileInput.attr({accept:"image/*"}),this.$zoomSlider=this.options.$zoomSlider.attr({min:0,max:1,step:.01}),this.previewSize={width:this.options.width||this.$preview.innerWidth(),height:this.options.height||this.$preview.innerHeight()},this.$image=(0,h["default"])("<img />").addClass(k.CLASS_NAMES.PREVIEW_IMAGE).attr("alt","").css({transformOrigin:"top left",webkitTransformOrigin:"top left",willChange:"transform"}),this.$imageContainer=(0,h["default"])("<div />").addClass(k.CLASS_NAMES.PREVIEW_IMAGE_CONTAINER).css({position:"absolute",overflow:"hidden",left:0,top:0,width:"100%",height:"100%"}).append(this.$image),this.$preview.append(this.$imageContainer),this.options.imageBackground&&(h["default"].isArray(this.options.imageBackgroundBorderWidth)?this.bgBorderWidthArray=this.options.imageBackgroundBorderWidth:this.bgBorderWidthArray=[0,1,2,3].map(function(){return a.options.imageBackgroundBorderWidth}),this.$bg=(0,h["default"])("<img />").addClass(k.CLASS_NAMES.PREVIEW_BACKGROUND).attr("alt","").css({position:"relative",left:this.bgBorderWidthArray[3],top:this.bgBorderWidthArray[0],transformOrigin:"top left",webkitTransformOrigin:"top left",willChange:"transform"}),this.$bgContainer=(0,h["default"])("<div />").addClass(k.CLASS_NAMES.PREVIEW_BACKGROUND_CONTAINER).css({position:"absolute",zIndex:0,top:-this.bgBorderWidthArray[0],right:-this.bgBorderWidthArray[1],bottom:-this.bgBorderWidthArray[2],left:-this.bgBorderWidthArray[3]}).append(this.$bg),this.bgBorderWidthArray[0]>0&&this.$bgContainer.css("overflow","hidden"),this.$preview.prepend(this.$bgContainer)),this.initialZoom=this.options.initialZoom,this.imageLoaded=!1,this.moveContinue=!1,this.zoomer=new j["default"],this.options.allowDragNDrop&&h["default"].event.props.push("dataTransfer"),this.bindListeners(),this.options.imageState&&this.options.imageState.src&&this.loadImage(this.options.imageState.src)}},{key:"bindListeners",value:function(){this.$fileInput.on("change.cropit",this.onFileChange.bind(this)),this.$imageContainer.on(k.EVENTS.PREVIEW,this.onPreviewEvent.bind(this)),this.$zoomSlider.on(k.EVENTS.ZOOM_INPUT,this.onZoomSliderChange.bind(this)),this.options.allowDragNDrop&&(this.$imageContainer.on("dragover.cropit dragleave.cropit",this.onDragOver.bind(this)),this.$imageContainer.on("drop.cropit",this.onDrop.bind(this)))}},{key:"unbindListeners",value:function(){this.$fileInput.off("change.cropit"),this.$imageContainer.off(k.EVENTS.PREVIEW),this.$imageContainer.off("dragover.cropit dragleave.cropit drop.cropit"),this.$zoomSlider.off(k.EVENTS.ZOOM_INPUT)}},{key:"onFileChange",value:function(a){this.options.onFileChange(a),this.$fileInput.get(0).files&&this.loadFile(this.$fileInput.get(0).files[0])}},{key:"loadFile",value:function(a){var b=new FileReader;a&&a.type.match("image")?(b.readAsDataURL(a),b.onload=this.onFileReaderLoaded.bind(this),b.onerror=this.onFileReaderError.bind(this)):a&&this.onFileReaderError()}},{key:"onFileReaderLoaded",value:function(a){this.loadImage(a.target.result)}},{key:"onFileReaderError",value:function(){this.options.onFileReaderError()}},{key:"onDragOver",value:function(a){a.preventDefault(),a.dataTransfer.dropEffect="copy",this.$preview.toggleClass(k.CLASS_NAMES.DRAG_HOVERED,"dragover"===a.type)}},{key:"onDrop",value:function(a){var b=this;a.preventDefault(),a.stopPropagation();var c=Array.prototype.slice.call(a.dataTransfer.files,0);c.some(function(a){return a.type.match("image")?(b.loadFile(a),!0):!1}),this.$preview.removeClass(k.CLASS_NAMES.DRAG_HOVERED)}},{key:"loadImage",value:function(a){var b=this;if(a)if(this.options.onImageLoading(),this.setImageLoadingClass(),0===a.indexOf("data"))this.preImage.src=a;else{var c=new XMLHttpRequest;c.onload=function(a){return a.target.status>=300?void b.onImageError.call(b,k.ERRORS.IMAGE_FAILED_TO_LOAD):void b.loadFile(a.target.response)},c.open("GET",a),c.responseType="blob",c.send()}}},{key:"onPreImageLoaded",value:function(){return this.shouldRejectImage({imageWidth:this.preImage.width,imageHeight:this.preImage.height,previewSize:this.previewSize,maxZoom:this.options.maxZoom,exportZoom:this.options.exportZoom,smallImage:this.options.smallImage})?(this.onImageError(k.ERRORS.SMALL_IMAGE),void(this.image.src&&this.setImageLoadedClass())):void(this.image.src=this.preImage.src)}},{key:"onImageLoaded",value:function(){this.rotation=0,this.setupZoomer(this.options.imageState&&this.options.imageState.zoom||this._initialZoom),this.options.imageState&&this.options.imageState.offset?this.offset=this.options.imageState.offset:this.centerImage(),this.options.imageState={},this.$image.attr("src",this.image.src),this.options.imageBackground&&this.$bg.attr("src",this.image.src),this.setImageLoadedClass(),this.imageLoaded=!0,this.options.onImageLoaded()}},{key:"onImageError",value:function(){this.options.onImageError.apply(this,arguments),this.removeImageLoadingClass()}},{key:"setImageLoadingClass",value:function(){this.$preview.removeClass(k.CLASS_NAMES.IMAGE_LOADED).addClass(k.CLASS_NAMES.IMAGE_LOADING)}},{key:"setImageLoadedClass",value:function(){this.$preview.removeClass(k.CLASS_NAMES.IMAGE_LOADING).addClass(k.CLASS_NAMES.IMAGE_LOADED)}},{key:"removeImageLoadingClass",value:function(){this.$preview.removeClass(k.CLASS_NAMES.IMAGE_LOADING)}},{key:"getEventPosition",value:function(a){return a.originalEvent&&a.originalEvent.touches&&a.originalEvent.touches[0]&&(a=a.originalEvent.touches[0]),a.clientX&&a.clientY?{x:a.clientX,y:a.clientY}:void 0}},{key:"onPreviewEvent",value:function(a){return this.imageLoaded?(this.moveContinue=!1,this.$imageContainer.off(k.EVENTS.PREVIEW_MOVE),"mousedown"===a.type||"touchstart"===a.type?(this.origin=this.getEventPosition(a),this.moveContinue=!0,this.$imageContainer.on(k.EVENTS.PREVIEW_MOVE,this.onMove.bind(this))):(0,h["default"])(document.body).focus(),a.stopPropagation(),!1):void 0}},{key:"onMove",value:function(a){var b=this.getEventPosition(a);return this.moveContinue&&b&&(this.offset={x:this.offset.x+b.x-this.origin.x,y:this.offset.y+b.y-this.origin.y}),this.origin=b,a.stopPropagation(),!1}},{key:"fixOffset",value:function(a){if(!this.imageLoaded)return a;var b={x:a.x,y:a.y};return this.options.freeMove||(this.imageWidth*this.zoom>=this.previewSize.width?b.x=Math.min(0,Math.max(b.x,this.previewSize.width-this.imageWidth*this.zoom)):b.x=Math.max(0,Math.min(b.x,this.previewSize.width-this.imageWidth*this.zoom)),this.imageHeight*this.zoom>=this.previewSize.height?b.y=Math.min(0,Math.max(b.y,this.previewSize.height-this.imageHeight*this.zoom)):b.y=Math.max(0,Math.min(b.y,this.previewSize.height-this.imageHeight*this.zoom))),b.x=(0,m.round)(b.x),b.y=(0,m.round)(b.y),b}},{key:"centerImage",value:function(){this.image.width&&this.image.height&&this.zoom&&(this.offset={x:(this.previewSize.width-this.imageWidth*this.zoom)/2,y:(this.previewSize.height-this.imageHeight*this.zoom)/2})}},{key:"onZoomSliderChange",value:function(){if(this.imageLoaded){this.zoomSliderPos=Number(this.$zoomSlider.val());var a=this.zoomer.getZoom(this.zoomSliderPos);a!==this.zoom&&(this.zoom=a)}}},{key:"enableZoomSlider",value:function(){this.$zoomSlider.removeAttr("disabled"),this.options.onZoomEnabled()}},{key:"disableZoomSlider",value:function(){this.$zoomSlider.attr("disabled",!0),this.options.onZoomDisabled()}},{key:"setupZoomer",value:function(a){this.zoomer.setup({imageSize:this.imageSize,previewSize:this.previewSize,exportZoom:this.options.exportZoom,maxZoom:this.options.maxZoom,minZoom:this.options.minZoom,smallImage:this.options.smallImage}),this.zoom=(0,m.exists)(a)?a:this._zoom,this.isZoomable()?this.enableZoomSlider():this.disableZoomSlider()}},{key:"fixZoom",value:function(a){return this.zoomer.fixZoom(a)}},{key:"isZoomable",value:function(){return this.zoomer.isZoomable()}},{key:"renderImage",value:function(){var a="\n      translate("+this.rotatedOffset.x+"px, "+this.rotatedOffset.y+"px)\n      scale("+this.zoom+")\n      rotate("+this.rotation+"deg)";this.$image.css({transform:a,webkitTransform:a}),this.options.imageBackground&&this.$bg.css({transform:a,webkitTransform:a})}},{key:"rotateCW",value:function(){this.shouldRejectImage({imageWidth:this.image.height,imageHeight:this.image.width,previewSize:this.previewSize,maxZoom:this.options.maxZoom,exportZoom:this.options.exportZoom,smallImage:this.options.smallImage})?this.rotation=(this.rotation+180)%360:this.rotation=(this.rotation+90)%360}},{key:"rotateCCW",value:function(){this.shouldRejectImage({imageWidth:this.image.height,imageHeight:this.image.width,previewSize:this.previewSize,maxZoom:this.options.maxZoom,exportZoom:this.options.exportZoom,smallImage:this.options.smallImage})?this.rotation=(this.rotation+180)%360:this.rotation=(this.rotation+270)%360}},{key:"shouldRejectImage",value:function(a){var b=a.imageWidth,c=a.imageHeight,d=a.previewSize,e=a.maxZoom,f=a.exportZoom,g=a.smallImage;return"reject"!==g?!1:b*e<d.width*f||c*e<d.height*f}},{key:"getCroppedImageData",value:function(a){if(this.image.src){var b={type:"image/png",quality:.75,originalSize:!1,fillBg:"#fff"};a=h["default"].extend({},b,a);var c=a.originalSize?1/this.zoom:this.options.exportZoom,d={width:this.zoom*c*this.image.width,height:this.zoom*c*this.image.height},e=(0,h["default"])("<canvas />").attr({width:this.previewSize.width*c,height:this.previewSize.height*c}).get(0),f=e.getContext("2d");return"image/jpeg"===a.type&&(f.fillStyle=a.fillBg,f.fillRect(0,0,e.width,e.height)),f.translate(this.rotatedOffset.x*c,this.rotatedOffset.y*c),f.rotate(this.rotation*Math.PI/180),f.drawImage(this.image,0,0,d.width,d.height),e.toDataURL(a.type,a.quality)}}},{key:"disable",value:function(){this.unbindListeners(),this.disableZoomSlider(),this.$el.addClass(k.CLASS_NAMES.DISABLED)}},{key:"reenable",value:function(){this.bindListeners(),this.enableZoomSlider(),this.$el.removeClass(k.CLASS_NAMES.DISABLED)}},{key:"$",value:function(a){return this.$el?this.$el.find(a):null}},{key:"offset",set:function(a){a&&(0,m.exists)(a.x)&&(0,m.exists)(a.y)&&(this._offset=this.fixOffset(a),this.renderImage(),this.options.onOffsetChange(a))},get:function(){return this._offset}},{key:"zoom",set:function(a){if(a=this.fixZoom(a),this.imageLoaded){var b=this.zoom,c=this.previewSize.width/2-(this.previewSize.width/2-this.offset.x)*a/b,d=this.previewSize.height/2-(this.previewSize.height/2-this.offset.y)*a/b;this._zoom=a,this.offset={x:c,y:d}}else this._zoom=a;this.zoomSliderPos=this.zoomer.getSliderPos(this.zoom),this.$zoomSlider.val(this.zoomSliderPos),this.options.onZoomChange(a)},get:function(){return this._zoom}},{key:"rotatedOffset",get:function(){return{x:this.offset.x+(90===this.rotation?this.image.height*this.zoom:0)+(180===this.rotation?this.image.width*this.zoom:0),y:this.offset.y+(180===this.rotation?this.image.height*this.zoom:0)+(270===this.rotation?this.image.width*this.zoom:0)}}},{key:"rotation",set:function(a){this._rotation=a,this.imageLoaded&&this.setupZoomer()},get:function(){return this._rotation}},{key:"imageState",get:function(){return{src:this.image.src,offset:this.offset,zoom:this.zoom}}},{key:"imageSrc",get:function(){return this.image.src},set:function(a){this.loadImage(a)}},{key:"imageWidth",get:function(){return this.rotation%180===0?this.image.width:this.image.height}},{key:"imageHeight",get:function(){return this.rotation%180===0?this.image.height:this.image.width}},{key:"imageSize",get:function(){return{width:this.imageWidth,height:this.imageHeight}}},{key:"initialZoom",get:function(){return this.options.initialZoom},set:function(a){this.options.initialZoom=a,"min"===a?this._initialZoom=0:"image"===a?this._initialZoom=1:this._initialZoom=0}},{key:"exportZoom",get:function(){return this.options.exportZoom},set:function(a){this.options.exportZoom=a,this.setupZoomer()}},{key:"minZoom",get:function(){return this.options.minZoom},set:function(a){this.options.minZoom=a,this.setupZoomer()}},{key:"maxZoom",get:function(){return this.options.maxZoom},set:function(a){this.options.maxZoom=a,this.setupZoomer()}},{key:"previewSize",get:function(){return this._previewSize},set:function(a){!a||a.width<=0||a.height<=0||(this._previewSize={width:a.width,height:a.height},this.$preview.innerWidth(this.previewSize.width).innerHeight(this.previewSize.height),this.imageLoaded&&this.setupZoomer())}}]),a}();b["default"]=n,a.exports=b["default"]},function(a,b){function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var d=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),e=function(){function a(){c(this,a),this.minZoom=this.maxZoom=1}return d(a,[{key:"setup",value:function(a){var b=a.imageSize,c=a.previewSize,d=a.exportZoom,e=a.maxZoom,f=a.minZoom,g=a.smallImage,h=c.width/b.width,i=c.height/b.height;"fit"===f?this.minZoom=Math.min(h,i):this.minZoom=Math.max(h,i),"allow"===g&&(this.minZoom=Math.min(this.minZoom,1)),this.maxZoom=Math.max(this.minZoom,e/d)}},{key:"getZoom",value:function(a){return this.minZoom&&this.maxZoom?a*(this.maxZoom-this.minZoom)+this.minZoom:null}},{key:"getSliderPos",value:function(a){return this.minZoom&&this.maxZoom?this.minZoom===this.maxZoom?0:(a-this.minZoom)/(this.maxZoom-this.minZoom):null}},{key:"isZoomable",value:function(){return this.minZoom&&this.maxZoom?this.minZoom!==this.maxZoom:null}},{key:"fixZoom",value:function(a){return Math.max(this.minZoom,Math.min(this.maxZoom,a))}}]),a}();b["default"]=e,a.exports=b["default"]},function(a,b){Object.defineProperty(b,"__esModule",{value:!0});var c="cropit";b.PLUGIN_KEY=c;var d={PREVIEW:"cropit-preview",PREVIEW_IMAGE_CONTAINER:"cropit-preview-image-container",PREVIEW_IMAGE:"cropit-preview-image",PREVIEW_BACKGROUND_CONTAINER:"cropit-preview-background-container",PREVIEW_BACKGROUND:"cropit-preview-background",FILE_INPUT:"cropit-image-input",ZOOM_SLIDER:"cropit-image-zoom-input",DRAG_HOVERED:"cropit-drag-hovered",IMAGE_LOADING:"cropit-image-loading",IMAGE_LOADED:"cropit-image-loaded",DISABLED:"cropit-disabled"};b.CLASS_NAMES=d;var e={IMAGE_FAILED_TO_LOAD:{code:0,message:"Image failed to load."},SMALL_IMAGE:{code:1,message:"Image is too small."}};b.ERRORS=e;var f=function(a){return a.map(function(a){return""+a+".cropit"}).join(" ")},g={PREVIEW:f(["mousedown","mouseup","mouseleave","touchstart","touchend","touchcancel","touchleave"]),PREVIEW_MOVE:f(["mousemove","touchmove"]),ZOOM_INPUT:f(["mousemove","touchmove","change"])};b.EVENTS=g},function(a,b,c){Object.defineProperty(b,"__esModule",{value:!0});var d=c(4),e={elements:[{name:"$preview",description:"The HTML element that displays image preview.",defaultSelector:"."+d.CLASS_NAMES.PREVIEW},{name:"$fileInput",description:"File input element.",defaultSelector:"input."+d.CLASS_NAMES.FILE_INPUT},{name:"$zoomSlider",description:"Range input element that controls image zoom.",defaultSelector:"input."+d.CLASS_NAMES.ZOOM_SLIDER}].map(function(a){return a.type="jQuery element",a["default"]="$imageCropper.find('"+a.defaultSelector+"')",a}),values:[{name:"width",type:"number",description:"Width of image preview in pixels. If set, it will override the CSS property.","default":null},{name:"height",type:"number",description:"Height of image preview in pixels. If set, it will override the CSS property.","default":null},{name:"imageBackground",type:"boolean",description:"Whether or not to display the background image beyond the preview area.","default":!1},{name:"imageBackgroundBorderWidth",type:"array or number",description:"Width of background image border in pixels.\n        The four array elements specify the width of background image width on the top, right, bottom, left side respectively.\n        The background image beyond the width will be hidden.\n        If specified as a number, border with uniform width on all sides will be applied.","default":[0,0,0,0]},{name:"exportZoom",type:"number",description:"The ratio between the desired image size to export and the preview size.\n        For example, if the preview size is `300px * 200px`, and `exportZoom = 2`, then\n        the exported image size will be `600px * 400px`.\n        This also affects the maximum zoom level, since the exported image cannot be zoomed to larger than its original size.","default":1},{name:"allowDragNDrop",type:"boolean",description:"When set to true, you can load an image by dragging it from local file browser onto the preview area.","default":!0},{name:"minZoom",type:"string",description:"This options decides the minimal zoom level of the image.\n        If set to `'fill'`, the image has to fill the preview area, i.e. both width and height must not go smaller than the preview area.\n        If set to `'fit'`, the image can shrink further to fit the preview area, i.e. at least one of its edges must not go smaller than the preview area.","default":"fill"},{name:"maxZoom",type:"number",description:"Determines how big the image can be zoomed. E.g. if set to 1.5, the image can be zoomed to 150% of its original size.","default":1},{name:"initialZoom",type:"string",description:"Determines the zoom when an image is loaded.\n        When set to `'min'`, image is zoomed to the smallest when loaded.\n        When set to `'image'`, image is zoomed to 100% when loaded.","default":"min"},{name:"freeMove",type:"boolean",description:"When set to true, you can freely move the image instead of being bound to the container borders","default":!1},{name:"smallImage",type:"string",description:"When set to `'reject'`, `onImageError` would be called when cropit loads an image that is smaller than the container.\n        When set to `'allow'`, images smaller than the container can be zoomed down to its original size, overiding `minZoom` option.\n        When set to `'stretch'`, the minimum zoom of small images would follow `minZoom` option.","default":"reject"}],callbacks:[{name:"onFileChange",description:"Called when user selects a file in the select file input.",params:[{name:"event",type:"object",description:"File change event object"}]},{name:"onFileReaderError",description:"Called when `FileReader` encounters an error while loading the image file."},{name:"onImageLoading",description:"Called when image starts to be loaded."},{name:"onImageLoaded",description:"Called when image is loaded."},{name:"onImageError",description:"Called when image cannot be loaded.",params:[{name:"error",type:"object",description:"Error object."},{name:"error.code",type:"number",description:"Error code. `0` means generic image loading failure. `1` means image is too small."},{name:"error.message",type:"string",description:"A message explaining the error."}]},{name:"onZoomEnabled",description:"Called when image the zoom slider is enabled."},{name:"onZoomDisabled",description:"Called when image the zoom slider is disabled."},{name:"onZoomChange",description:"Called when zoom changes.",params:[{name:"zoom",type:"number",description:"New zoom."}]},{name:"onOffsetChange",description:"Called when image offset changes.",params:[{name:"offset",type:"object",description:"New offset, with `x` and `y` values."}]}].map(function(a){return a.type="function",a})},f=function(a){var b={};return a&&e.elements.forEach(function(c){b[c.name]=a.find(c.defaultSelector)}),e.values.forEach(function(a){b[a.name]=a["default"]}),e.callbacks.forEach(function(a){b[a.name]=function(){}}),b};b.loadDefaults=f,b["default"]=e},function(a,b){Object.defineProperty(b,"__esModule",{value:!0});var c=function(a){return"undefined"!=typeof a};b.exists=c;var d=function(a){return+(Math.round(100*a)+"e-2")};b.round=d}])}),!function(a){"use strict";function b(a){if(void 0===Function.prototype.name){var b=/function\s([^(]{1,})\(/,c=b.exec(a.toString());return c&&c.length>1?c[1].trim():""}return void 0===a.prototype?a.constructor.name:a.prototype.constructor.name}function c(a){return/true/.test(a)?!0:/false/.test(a)?!1:isNaN(1*a)?a:parseFloat(a)}function d(a){return a.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}var e="6.1.0",f={version:e,_plugins:{},_uuids:[],_activePlugins:{},rtl:function(){return"rtl"===a("html").attr("dir")},plugin:function(a,c){var e=c||b(a),f=d(e);this._plugins[f]=this[e]=a},registerPlugin:function(a,c){var e=c?d(c):b(a.constructor).toLowerCase();a.uuid=this.GetYoDigits(6,e),a.$element.attr("data-"+e)||a.$element.attr("data-"+e,a.uuid),a.$element.data("zfPlugin")||a.$element.data("zfPlugin",a),a.$element.trigger("init.zf."+e),this._uuids.push(a.uuid)},unregisterPlugin:function(a){var c=d(b(a.$element.data("zfPlugin").constructor));this._uuids.splice(this._uuids.indexOf(a.uuid),1),a.$element.removeAttr("data-"+c).removeData("zfPlugin").trigger("destroyed.zf."+c);for(var e in a)a[e]=null},reInit:function(b){var c=b instanceof a;try{if(c)b.each(function(){a(this).data("zfPlugin")._init()});else{var d=typeof b,e=this,f={object:function(b){b.forEach(function(b){a("[data-"+b+"]").foundation("_init")})},string:function(){a("[data-"+b+"]").foundation("_init")},undefined:function(){this.object(Object.keys(e._plugins))}};f[d](b)}}catch(g){console.error(g)}finally{return b}},GetYoDigits:function(a,b){return a=a||6,Math.round(Math.pow(36,a+1)-Math.random()*Math.pow(36,a)).toString(36).slice(1)+(b?"-"+b:"")},reflow:function(b,d){"undefined"==typeof d?d=Object.keys(this._plugins):"string"==typeof d&&(d=[d]);var e=this;a.each(d,function(d,f){var g=e._plugins[f],h=a(b).find("[data-"+f+"]").addBack("[data-"+f+"]");h.each(function(){var b=a(this),d={};if(b.data("zfPlugin"))return void console.warn("Tried to initialize "+f+" on an element that already has a Foundation plugin.");if(b.attr("data-options")){b.attr("data-options").split(";").forEach(function(a,b){var e=a.split(":").map(function(a){return a.trim()});e[0]&&(d[e[0]]=c(e[1]))})}try{b.data("zfPlugin",new g(a(this),d))}catch(e){console.error(e)}finally{return}})})},getFnName:b,transitionend:function(a){var b,c={transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend"},d=document.createElement("div");for(var e in c)"undefined"!=typeof d.style[e]&&(b=c[e]);return b?b:(b=setTimeout(function(){a.triggerHandler("transitionend",[a])},1),"transitionend")}};f.util={throttle:function(a,b){var c=null;return function(){var d=this,e=arguments;null===c&&(c=setTimeout(function(){a.apply(d,e),c=null},b))}}};var g=function(c){var d=typeof c,e=a("meta.foundation-mq"),g=a(".no-js");if(e.length||a('<meta class="foundation-mq">').appendTo(document.head),g.length&&g.removeClass("no-js"),"undefined"===d)f.MediaQuery._init(),f.reflow(this);else{if("string"!==d)throw new TypeError("We're sorry, '"+d+"' is not a valid parameter. You must use a string representing the method you wish to invoke.");var h=Array.prototype.slice.call(arguments,1),i=this.data("zfPlugin");if(void 0===i||void 0===i[c])throw new ReferenceError("We're sorry, '"+c+"' is not an available method for "+(i?b(i):"this element")+".");1===this.length?i[c].apply(i,h):this.each(function(b,d){i[c].apply(a(d).data("zfPlugin"),h)})}return this};window.Foundation=f,a.fn.foundation=g,function(){Date.now&&window.Date.now||(window.Date.now=Date.now=function(){return(new Date).getTime()});for(var a=["webkit","moz"],b=0;b<a.length&&!window.requestAnimationFrame;++b){var c=a[b];window.requestAnimationFrame=window[c+"RequestAnimationFrame"],window.cancelAnimationFrame=window[c+"CancelAnimationFrame"]||window[c+"CancelRequestAnimationFrame"]}if(/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent)||!window.requestAnimationFrame||!window.cancelAnimationFrame){var d=0;window.requestAnimationFrame=function(a){var b=Date.now(),c=Math.max(d+16,b);return setTimeout(function(){a(d=c)},c-b)},window.cancelAnimationFrame=clearTimeout}window.performance&&window.performance.now||(window.performance={start:Date.now(),now:function(){return Date.now()-this.start}})}(),Function.prototype.bind||(Function.prototype.bind=function(a){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var b=Array.prototype.slice.call(arguments,1),c=this,d=function(){},e=function(){return c.apply(this instanceof d?this:a,b.concat(Array.prototype.slice.call(arguments)))};return this.prototype&&(d.prototype=this.prototype),e.prototype=new d,e})}(jQuery),!function(a,b){"use strict";b.Keyboard={};var c={9:"TAB",13:"ENTER",27:"ESCAPE",32:"SPACE",37:"ARROW_LEFT",38:"ARROW_UP",39:"ARROW_RIGHT",40:"ARROW_DOWN"},d=function(a){var b={};for(var c in a)b[a[c]]=a[c];return b}(c);b.Keyboard.keys=d;var e=function(a){var b=c[a.which||a.keyCode]||String.fromCharCode(a.which).toUpperCase();return a.shiftKey&&(b="SHIFT_"+b),a.ctrlKey&&(b="CTRL_"+b),a.altKey&&(b="ALT_"+b),b};b.Keyboard.parseKey=e;var f={},g=function(c,d,g){var h,i,j,k=f[d],l=e(c);return k?(h="undefined"==typeof k.ltr?k:b.rtl()?a.extend({},k.ltr,k.rtl):a.extend({},k.rtl,k.ltr),i=h[l],j=g[i],void(j&&"function"==typeof j?(j.apply(),(g.handled||"function"==typeof g.handled)&&g.handled.apply()):(g.unhandled||"function"==typeof g.unhandled)&&g.unhandled.apply())):console.warn("Component not defined!")};b.Keyboard.handleKey=g;var h=function(b){return b.find("a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]").filter(function(){return a(this).is(":visible")&&!(a(this).attr("tabindex")<0)})};b.Keyboard.findFocusable=h;var i=function(a,b){f[a]=b};b.Keyboard.register=i}(jQuery,window.Foundation),!function(a,b){var c=function(a,b,c,e){var f,g,h,i,j=d(a);if(b){var k=d(b);g=j.offset.top+j.height<=k.height+k.offset.top,f=j.offset.top>=k.offset.top,h=j.offset.left>=k.offset.left,i=j.offset.left+j.width<=k.width}else g=j.offset.top+j.height<=j.windowDims.height+j.windowDims.offset.top,f=j.offset.top>=j.windowDims.offset.top,h=j.offset.left>=j.windowDims.offset.left,i=j.offset.left+j.width<=j.windowDims.width;var l=[g,f,h,i];return c?h===i==!0:e?f===g==!0:-1===l.indexOf(!1)},d=function(a,c){if(a=a.length?a[0]:a,a===b||a===document)throw new Error("I'm sorry, Dave. I'm afraid I can't do that.");var d=a.getBoundingClientRect(),e=a.parentNode.getBoundingClientRect(),f=document.body.getBoundingClientRect(),g=b.pageYOffset,h=b.pageXOffset;return{width:d.width,height:d.height,offset:{top:d.top+g,left:d.left+h},parentDims:{width:e.width,height:e.height,offset:{top:e.top+g,left:e.left+h}},windowDims:{width:f.width,height:f.height,offset:{top:g,left:h}}}},e=function(a,b,c,e,f,g){var h=d(a),i=b?d(b):null;switch(c){case"top":return{left:i.offset.left,top:i.offset.top-(h.height+e)};case"left":return{left:i.offset.left-(h.width+f),top:i.offset.top};case"right":return{left:i.offset.left+i.width+f,top:i.offset.top};case"center top":return{left:i.offset.left+i.width/2-h.width/2,top:i.offset.top-(h.height+e)};case"center bottom":return{left:g?f:i.offset.left+i.width/2-h.width/2,top:i.offset.top+i.height+e};case"center left":return{left:i.offset.left-(h.width+f),top:i.offset.top+i.height/2-h.height/2};case"center right":return{left:i.offset.left+i.width+f+1,top:i.offset.top+i.height/2-h.height/2};case"center":return{left:h.windowDims.offset.left+h.windowDims.width/2-h.width/2,top:h.windowDims.offset.top+h.windowDims.height/2-h.height/2};case"reveal":return{left:(h.windowDims.width-h.width)/2,top:h.windowDims.offset.top+e};case"reveal full":return{left:h.windowDims.offset.left,top:h.windowDims.offset.top};default:return{left:i.offset.left,top:i.offset.top+i.height+e}}};a.Box={ImNotTouchingYou:c,GetDimensions:d,GetOffsets:e}}(window.Foundation,window),!function(a,b){"use strict";b(document).on("click.zf.trigger","[data-open]",function(){var a=b(this).data("open");b("#"+a).triggerHandler("open.zf.trigger",[b(this)])}),b(document).on("click.zf.trigger","[data-close]",function(){var a=b(this).data("close");a?b("#"+a).triggerHandler("close.zf.trigger",[b(this)]):b(this).trigger("close.zf.trigger")}),b(document).on("click.zf.trigger","[data-toggle]",function(){var a=b(this).data("toggle");b("#"+a).triggerHandler("toggle.zf.trigger",[b(this)])}),b(document).on("close.zf.trigger","[data-closable]",function(){var c=b(this).data("closable")||"fade-out";a.Motion?a.Motion.animateOut(b(this),c,function(){b(this).trigger("closed.zf")}):b(this).fadeOut().trigger("closed.zf")});var c=function(){for(var a=["WebKit","Moz","O","Ms",""],b=0;b<a.length;b++)if(a[b]+"MutationObserver"in window)return window[a[b]+"MutationObserver"];return!1}(),d=function(){h(),f(),g(),e()};b(window).load(function(){d()});var e=function(a){var c=b("[data-yeti-box]"),d=["dropdown","tooltip","reveal"];if(a&&("string"==typeof a?d.push(a):"object"==typeof a&&"string"==typeof a[0]?d.concat(a):console.error("Plugin names must be strings")),c.length){var e=d.map(function(a){return"closeme.zf."+a}).join(" ");b(window).off(e).on(e,function(a,c){var d=a.namespace.split(".")[0],e=b("[data-"+d+"]").not('[data-yeti-box="'+c+'"]');e.each(function(){var a=b(this);a.triggerHandler("close.zf.trigger",[a]);
})})}},f=function(a){var d,e=b("[data-resize]");e.length&&b(window).off("resize.zf.trigger").on("resize.zf.trigger",function(f){d&&clearTimeout(d),d=setTimeout(function(){c||e.each(function(){b(this).triggerHandler("resizeme.zf.trigger")}),e.attr("data-events","resize")},a||10)})},g=function(a){var d,e=b("[data-scroll]");e.length&&b(window).off("scroll.zf.trigger").on("scroll.zf.trigger",function(f){d&&clearTimeout(d),d=setTimeout(function(){c||e.each(function(){b(this).triggerHandler("scrollme.zf.trigger")}),e.attr("data-events","scroll")},a||10)})},h=function(){if(!c)return!1;var a=document.querySelectorAll("[data-resize], [data-scroll], [data-mutate]"),d=function(a){var c=b(a[0].target);switch(c.attr("data-events")){case"resize":c.triggerHandler("resizeme.zf.trigger",[c]);break;case"scroll":c.triggerHandler("scrollme.zf.trigger",[c,window.pageYOffset]);break;default:return!1}};if(a.length)for(var e=0;e<=a.length-1;e++){var f=new c(d);f.observe(a[e],{attributes:!0,childList:!1,characterData:!1,subtree:!1,attributeFilter:["data-events"]})}};a.IHearYou=d}(window.Foundation,window.jQuery),!function(a,b){function c(a){var b={};return"string"!=typeof a?b:(a=a.trim().slice(1,-1))?b=a.split("&").reduce(function(a,b){var c=b.replace(/\+/g," ").split("="),d=c[0],e=c[1];return d=decodeURIComponent(d),e=void 0===e?null:decodeURIComponent(e),a.hasOwnProperty(d)?Array.isArray(a[d])?a[d].push(e):a[d]=[a[d],e]:a[d]=e,a},{}):b}var d={queries:[],current:"",atLeast:function(a){var b=this.get(a);return b?window.matchMedia(b).matches:!1},get:function(a){for(var b in this.queries){var c=this.queries[b];if(a===c.name)return c.value}return null},_init:function(){var b,d=this,e=a(".foundation-mq").css("font-family");b=c(e);for(var f in b)d.queries.push({name:f,value:"only screen and (min-width: "+b[f]+")"});this.current=this._getCurrentSize(),this._watcher()},_getCurrentSize:function(){var a;for(var b in this.queries){var c=this.queries[b];window.matchMedia(c.value).matches&&(a=c)}return"object"==typeof a?a.name:a},_watcher:function(){var b=this;a(window).on("resize.zf.mediaquery",function(){var c=b._getCurrentSize();c!==b.current&&(a(window).trigger("changed.zf.mediaquery",[c,b.current]),b.current=c)})}};b.MediaQuery=d,window.matchMedia||(window.matchMedia=function(){"use strict";var a=window.styleMedia||window.media;if(!a){var b=document.createElement("style"),c=document.getElementsByTagName("script")[0],d=null;b.type="text/css",b.id="matchmediajs-test",c.parentNode.insertBefore(b,c),d="getComputedStyle"in window&&window.getComputedStyle(b,null)||b.currentStyle,a={matchMedium:function(a){var c="@media "+a+"{ #matchmediajs-test { width: 1px; } }";return b.styleSheet?b.styleSheet.cssText=c:b.textContent=c,"1px"===d.width}}}return function(b){return{matches:a.matchMedium(b||"all"),media:b||"all"}}}())}(jQuery,Foundation),!function(a,b){function c(c,f,g,h){function i(){c||f.hide(),j(),h&&h.apply(f)}function j(){f[0].style.transitionDuration=0,f.removeClass(k+" "+l+" "+g)}if(f=a(f).eq(0),f.length){var k=c?d[0]:d[1],l=c?e[0]:e[1];j(),f.addClass(g).css("transition","none"),requestAnimationFrame(function(){f.addClass(k),c&&f.show()}),requestAnimationFrame(function(){f[0].offsetWidth,f.css("transition",""),f.addClass(l)}),f.one(b.transitionend(f),i)}}var d=["mui-enter","mui-leave"],e=["mui-enter-active","mui-leave-active"],f={animateIn:function(a,b,d){c(!0,a,b,d)},animateOut:function(a,b,d){c(!1,a,b,d)}},g=function(a,b,c){function d(h){g||(g=window.performance.now()),f=h-g,c.apply(b),a>f?e=window.requestAnimationFrame(d,b):(window.cancelAnimationFrame(e),b.trigger("finished.zf.animate",[b]).triggerHandler("finished.zf.animate",[b]))}var e,f,g=null;e=window.requestAnimationFrame(d)};b.Move=g,b.Motion=f}(jQuery,Foundation),!function(a,b){"use strict";function c(d,e){this.$element=d,this.options=b.extend({},c.defaults,this.$element.data(),e),this._init(),a.registerPlugin(this,"Reveal"),a.Keyboard.register("Reveal",{ENTER:"open",SPACE:"open",ESCAPE:"close",TAB:"tab_forward",SHIFT_TAB:"tab_backward"})}c.defaults={animationIn:"",animationOut:"",showDelay:0,hideDelay:0,closeOnClick:!0,closeOnEsc:!0,multipleOpened:!1,vOffset:100,hOffset:0,fullScreen:!1,btmOffsetPct:10,overlay:!0,resetOnClose:!1},c.prototype._init=function(){if(this.id=this.$element.attr("id"),this.isActive=!1,this.$anchor=b(b('[data-open="'+this.id+'"]').length?'[data-open="'+this.id+'"]':'[data-toggle="'+this.id+'"]'),this.$anchor.length){var c=this.$anchor[0].id||a.GetYoDigits(6,"reveal");this.$anchor.attr({"aria-controls":this.id,id:c,"aria-haspopup":!0,tabindex:0}),this.$element.attr({"aria-labelledby":c})}(this.options.fullScreen||this.$element.hasClass("full"))&&(this.options.fullScreen=!0,this.options.overlay=!1),this.options.overlay&&!this.$overlay&&(this.$overlay=this._makeOverlay(this.id)),this.$element.attr({role:"dialog","aria-hidden":!0,"data-yeti-box":this.id,"data-resize":this.id}),this._events()},c.prototype._makeOverlay=function(a){var c=b("<div></div>").addClass("reveal-overlay").attr({tabindex:-1,"aria-hidden":!0}).appendTo("body");return this.options.closeOnClick&&c.attr({"data-close":a}),c},c.prototype._events=function(){var a=this;this.$element.on({"open.zf.trigger":this.open.bind(this),"close.zf.trigger":this.close.bind(this),"toggle.zf.trigger":this.toggle.bind(this),"resizeme.zf.trigger":function(){a.$element.is(":visible")&&a._setPosition(function(){})}}),this.$anchor.length&&this.$anchor.on("keydown.zf.reveal",function(b){13!==b.which&&32!==b.which||(b.stopPropagation(),b.preventDefault(),a.open())}),this.options.closeOnClick&&this.options.overlay&&this.$overlay.off(".zf.reveal").on("click.zf.reveal",this.close.bind(this))},c.prototype._setPosition=function(b){var c=a.Box.GetDimensions(this.$element),d=this.options.fullScreen?"reveal full":c.height>=.5*c.windowDims.height?"reveal":"center";"reveal full"===d?this.$element.offset(a.Box.GetOffsets(this.$element,null,d,this.options.vOffset)).css({height:c.windowDims.height,width:c.windowDims.width}):a.MediaQuery.atLeast("medium")&&a.Box.ImNotTouchingYou(this.$element,null,!0,!1)?this.$element.css({"max-height":c.windowDims.height-this.options.vOffset*(this.options.btmOffsetPct/100+1),width:""}).offset(a.Box.GetOffsets(this.$element,null,d,this.options.vOffset)):(this.$element.css({width:c.windowDims.width-2*this.options.hOffset}).offset(a.Box.GetOffsets(this.$element,null,"center",this.options.vOffset,this.options.hOffset)),this.changedSize=!0),b()},c.prototype.open=function(){var c=this;this.isActive=!0,this.$element.css({visibility:"hidden"}).show().scrollTop(0),this._setPosition(function(){c.$element.hide().css({visibility:""}),c.options.multipleOpened||c.$element.trigger("closeme.zf.reveal",c.id),c.options.animationIn?c.options.overlay?a.Motion.animateIn(c.$overlay,"fade-in",function(){a.Motion.animateIn(c.$element,c.options.animationIn,function(){c.focusableElements=a.Keyboard.findFocusable(c.$element)})}):a.Motion.animateIn(c.$element,c.options.animationIn,function(){c.focusableElements=a.Keyboard.findFocusable(c.$element)}):c.options.overlay?c.$overlay.show(0,function(){c.$element.show(c.options.showDelay,function(){})}):c.$element.show(c.options.showDelay,function(){})}),this.$element.attr({"aria-hidden":!1}).attr("tabindex",-1).focus().trigger("open.zf.reveal"),b("body").addClass("is-reveal-open").attr({"aria-hidden":!(!this.options.overlay&&!this.options.fullScreen)}),setTimeout(function(){c._extraHandlers()},0)},c.prototype._extraHandlers=function(){var c=this;this.focusableElements=a.Keyboard.findFocusable(this.$element),this.options.overlay||!this.options.closeOnClick||this.options.fullScreen||b("body").on("click.zf.reveal",function(a){c.close()}),this.options.closeOnEsc&&b(window).on("keydown.zf.reveal",function(b){a.Keyboard.handleKey(b,"Reveal",{close:function(){c.options.closeOnEsc&&(c.close(),c.$anchor.focus())}}),0===c.focusableElements.length&&b.preventDefault()}),this.$element.on("keydown.zf.reveal",function(d){var e=b(this);a.Keyboard.handleKey(d,"Reveal",{tab_forward:function(){c.$element.find(":focus").is(c.focusableElements.eq(-1))&&(c.focusableElements.eq(0).focus(),d.preventDefault())},tab_backward:function(){(c.$element.find(":focus").is(c.focusableElements.eq(0))||c.$element.is(":focus"))&&(c.focusableElements.eq(-1).focus(),d.preventDefault())},open:function(){c.$element.find(":focus").is(c.$element.find("[data-close]"))?setTimeout(function(){c.$anchor.focus()},1):e.is(c.focusableElements)&&c.open()},close:function(){c.options.closeOnEsc&&(c.close(),c.$anchor.focus())}})})},c.prototype.close=function(){if(!this.isActive||!this.$element.is(":visible"))return!1;var c=this;this.options.animationOut?a.Motion.animateOut(this.$element,this.options.animationOut,function(){c.options.overlay&&a.Motion.animateOut(c.$overlay,"fade-out",function(){})}):this.$element.hide(c.options.hideDelay,function(){c.options.overlay&&c.$overlay.hide(0,function(){})}),this.options.closeOnEsc&&b(window).off("keydown.zf.reveal"),!this.options.overlay&&this.options.closeOnClick&&b("body").off("click.zf.reveal"),this.$element.off("keydown.zf.reveal"),this.changedSize&&this.$element.css({height:"",width:""}),b("body").removeClass("is-reveal-open").attr({"aria-hidden":!1,tabindex:""}),this.options.resetOnClose&&this.$element.html(this.$element.html()),this.isActive=!1,this.$element.attr({"aria-hidden":!0}).trigger("closed.zf.reveal")},c.prototype.toggle=function(){this.isActive?this.close():this.open()},c.prototype.destroy=function(){this.options.overlay&&this.$overlay.hide().off().remove(),this.$element.hide(),this.$anchor.off(),a.unregisterPlugin(this)},a.plugin(c,"Reveal"),"undefined"!=typeof module&&"undefined"!=typeof module.exports&&(module.exports=c),"function"==typeof define&&define(["foundation"],function(){return c})}(Foundation,jQuery),jQuery(document).ready(function(a){var b=a("#image-cropper");b.cropit({imageBackground:!0}),a(".rotate-cw").click(function(){a("#image-cropper").cropit("rotateCW")}),a(".rotate-ccw").click(function(){a("#image-cropper").cropit("rotateCCW")}),a(".cropit-select-image").click(function(){a(".cropit-image-input").click()}),a(".cropit-save-image").click(function(){var b=a("#image-cropper").cropit("export");console.log(b)})}),jQuery(function(a){a(document).foundation()});
//# sourceMappingURL=script.js.map